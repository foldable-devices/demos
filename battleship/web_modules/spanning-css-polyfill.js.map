{"version":3,"file":"spanning-css-polyfill.js","sources":["../node_modules/spanning-css-polyfill/build/spanning-css-polyfill.js"],"sourcesContent":["var e=function(){try{var e=function(){if(!t)return t=!0,Promise.resolve(Promise.resolve(!1)).then(function(e){t=e,window[n].dispatchEvent(new Event(\"change\"))})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},n=\"__foldables__\",t=!1,i=function(){var t=this;if(void 0!==window[n])return window[n];var i=document.createDocumentFragment();this.addEventListener=i.addEventListener.bind(i),this.removeEventListener=i.removeEventListener.bind(i),this.dispatchEvent=function(e){if(\"change\"===e.type){var n=\"on\"+e.type;return\"function\"==typeof t[n]&&t[n](e),i.dispatchEvent(e)}},window.addEventListener(\"message\",function(e){\"update\"===e.data.action&&Object.assign(t,e.data.value)}),window.addEventListener(\"resize\",function(){return function(e,n){var t;return function(){var n=arguments,i=this;clearTimeout(t),t=setTimeout(function(){return e.apply(i,n)},200)}}(e())})},r={spanning:{configurable:!0},foldSize:{configurable:!0},browserShellSize:{configurable:!0}};r.spanning.get=function(){return sessionStorage.getItem(n+\"-spanning\")||\"none\"},r.spanning.set=function(t){if(![\"none\",\"single-fold-horizontal\",\"single-fold-vertical\"].includes(t))throw new TypeError(t);sessionStorage.setItem(n+\"-spanning\",t),e()},r.foldSize.get=function(){return+sessionStorage.getItem(n+\"-fold-size\")||0},r.foldSize.set=function(t){if(!(Number(t)>=0))throw new TypeError(t);sessionStorage.setItem(n+\"-fold-size\",t),e()},r.browserShellSize.get=function(){return+sessionStorage.getItem(n+\"-browser-shell-size\")||0},r.browserShellSize.set=function(t){if(!(Number(t)>=0))throw new TypeError(t);sessionStorage.setItem(n+\"-browser-shell-size\",t),e()},i.prototype.getSegments=function(){if(\"none\"===this.spanning)return[{left:0,top:0,width:window.innerWidth,height:window.innerHeight}];if(\"single-fold-horizontal\"===this.spanning){var e=(window.innerHeight-this.browserShellSize)/2,n=window.innerWidth;return[{top:0,left:0,width:n,height:e-this.foldSize/2},{top:e-this.foldSize/2,height:this.foldSize,left:0,width:n},{top:e+this.foldSize/2,left:0,width:n,height:window.innerHeight}]}if(\"single-fold-vertical\"===this.spanning){var t=window.innerWidth/2-this.foldSize/2,i=window.innerHeight;return[{top:0,left:0,width:t,height:i},{top:0,height:i,left:t,width:this.foldSize},{top:0,left:window.innerWidth/2+this.foldSize/2,width:t,height:i}]}},Object.defineProperties(i.prototype,r),window[n]=new i,window.getWindowSegments=function(){var e=window[n].getSegments();return[e[0],e[2]]};var o=\"spanning\",a=\"single-fold-horizontal\",s=\"single-fold-vertical\",l=\"none\",d=\"(\\\\s*)(@media.*?\\\\b\"+o+\"\\\\b[^{]+)\\\\{([\\\\s\\\\S]+?\\\\})(\\\\s*)\\\\}\",h=/\\((.*?)\\)/gi,f=/@media[^\\(]+/gi,c=function(e){return new RegExp(\"env\\\\(\\\\s*\"+e+\"\\\\s*\\\\)\",\"gi\")};function u(e,n){return e.replace(new RegExp(d,\"gi\"),n)}function g(e){var n=function(e){var n,t=new RegExp(d,\"gi\");if(\"function\"==typeof e.matchAll)n=Array.from(e.matchAll(t));else{for(n=[];n[n.length]=t.exec(e););n.length--}return n}(e),t={};return t[a]=\"\",t[s]=\"\",t[l]=\"\",n.forEach(function(e){var n=e[1],i=e[2],r=e[3],d=e[4],c=l;i.indexOf(a)>-1&&(c=a),i.indexOf(s)>-1&&(c=s);var u=i.match(f)||[],g=i.match(h)||[];g=g.filter(function(e){return!e.includes(o)}).join(\" and \"),t[c]+=\"\"+n+u+g+\"{\"+r+d+\"}\"}),t}var w=window.matchMedia(\"(spanning: single-fold-horizontal)\").matches||window.matchMedia(\"(spanning: single-fold-vertical)\").matches||window.matchMedia(\"(spanning: none)\").matches||!1;console.info(\"CSS Spanning Media Queries are supported? \"+w);var p,v=new i;if(!w){var m=Array.from(document.querySelectorAll('link[rel=\"stylesheet\"], style'));(p=m,Promise.all(p.map(function(e){return e.href?fetch(e.href).then(function(e){return e.text()}):e.textContent}))).then(function(e){var n=new DocumentFragment;e.forEach(function(e,t){for(var i=u(e,\"\"),r=g(e),o=m[t].href||\"inline\",a=0,s=Object.entries(r);a<s.length;a+=1){var l=s[a];S[l[0]]+=\"/* origin: \"+o+\" */\"+l[1]}var d=document.createElement(\"style\");d.setAttribute(\"data-css-origin\",o),d.textContent=i,n.appendChild(d)}),m.forEach(function(e){return null!=e.parentElement&&e.parentElement.removeChild(e)}),document.head.appendChild(n),b()})}var S={\"single-fold-horizontal\":\"\",\"single-fold-vertical\":\"\",none:\"\"};function z(e,n){if(w)return e;var t=u(e,\"\"),i=g(e);n&&(S[n]={\"single-fold-horizontal\":\"\",\"single-fold-vertical\":\"\",none:\"\"});for(var r=n?S[n]:S,o=n?\"\":\"/* origin: inline */\",a=0,s=Object.entries(i);a<s.length;a+=1){var l=s[a];r[l[0]]+=\"\"+o+l[1]}return r[\"non-spanning\"]=t,t}function b(e){w||(E(e),v.addEventListener(\"change\",function(){return E(e)}))}function E(e){for(var n,t=v,i=e?S[e.nodeName.toLowerCase()][t.spanning]:S[t.spanning],r=e?S[e.nodeName.toLowerCase()][\"non-spanning\"]:null,o=v.getSegments(),a=0,s=Object.entries(1===o.length?{}:o[1]);a<s.length;a+=1){var l=s[a];n=l[1]+\"px\",i=i.replace(c(\"fold-\"+l[0]),n)}var d=\"__foldables_sheet__\",h=function(e,n){for(var t=0,i=e.querySelectorAll(\".\"+d);t<i.length;t+=1)i[t].remove();var r=document.createElement(\"style\");r.className=d,r.textContent=n,e===document?document.head.appendChild(r):e.appendChild(r)};if(e){var f=e.shadowRoot;\"adoptedStyleSheets\"in f&&f.adoptedStyleSheets.length>0?f.adoptedStyleSheets[0].replace(r+i):h(f,i)}else h(document,i)}export{i as FoldablesFeature,z as adjustCSS,b as observe};\n//# sourceMappingURL=spanning-css-polyfill.js.map\n"],"names":["e","t","Promise","resolve","then","window","n","dispatchEvent","Event","reject","i","this","document","createDocumentFragment","addEventListener","bind","removeEventListener","type","data","action","Object","assign","value","arguments","clearTimeout","setTimeout","apply","r","spanning","configurable","foldSize","browserShellSize","get","sessionStorage","getItem","set","includes","TypeError","setItem","Number","prototype","getSegments","left","top","width","innerWidth","height","innerHeight","defineProperties","getWindowSegments","o","a","s","l","d","h","f","c","RegExp","u","replace","g","matchAll","Array","from","length","exec","single-fold-horizontal","single-fold-vertical","none","forEach","indexOf","match","filter","join","w","matchMedia","matches","console","info","p","v","m","querySelectorAll","all","map","href","fetch","text","textContent","DocumentFragment","entries","S","createElement","setAttribute","appendChild","parentElement","removeChild","head","b","z","E","nodeName","toLowerCase","remove","className","shadowRoot","adoptedStyleSheets"],"mappings":"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"}